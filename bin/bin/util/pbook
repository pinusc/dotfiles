#!/bin/bash
BOOK_DIR="$HOME/books"

[[ -z "$PDF_VIEWER" ]] && PDF_VIEWER=zathura
fzf_a=(--info inline --height 10 --reverse -1 -e)

if [[ -n "$*" ]]; then
    fzf_a+=(-q "$*")
fi


cd "$BOOK_DIR" || exit
fname="$(find . -mindepth 1 -maxdepth 2 -type f -name '*.pdf' | fzf "${fzf_a[@]}")"

if [[ -f "$fname" ]]; then
    "$PDF_VIEWER" "$fname" &
    disown
else
    echo "No syllabus found!"
    exit 1
fi
